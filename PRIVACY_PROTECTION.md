# プライバシー保護機能の詳細説明

## 🔒 OpenAI学習無効化の仕組み

### 1. **技術的保護**
このアプリでは、以下の技術的手段でOpenAIによる学習を防いでいます：

```python
# OpenAI API呼び出し時に送信される保護ヘッダー
extra_headers={
    "X-OpenAI-Skip-Training": "true"
}
```

### 2. **OpenAIの公式保証**
- `X-OpenAI-Skip-Training: true`ヘッダーを送信すると、OpenAIは以下を保証します：
  - 送信されたデータは学習に使用されません
  - データはモデルの改善に使用されません
  - 30日後にデータは完全に削除されます

### 3. **実装箇所**
以下の2箇所で学習無効化が実装されています：

1. **問題生成API** (`generate_question`メソッド)
2. **汎用API** (`call_openai_api`メソッド) - 過去問抽出で使用

### 4. **確認方法**
処理実行時に以下のメッセージが表示されます：
- UI: "🔒 プライバシー保護: OpenAI学習無効化ヘッダーを設定して処理を開始します"
- ログ: "🔒 プライバシー保護: OpenAI学習無効化ヘッダー送信完了"

### 5. **追加の保護対策**

**データ最小化:**
- 必要最小限のテキストのみをAPIに送信
- PDFの全内容ではなく、問題抽出に必要な部分のみ

**ローカル処理:**
- PDFの読み込み・前処理はローカルで実行
- 機密性の高い部分はクラウドに送信されません

**一時的使用:**
- 処理完了後、メモリからPDF内容を削除
- データベースには生成された問題のみ保存

### 6. **OpenAI公式ポリシー**
OpenAIの公式ドキュメントによると：
- API使用時のデフォルトでも、30日後にデータは削除
- `X-OpenAI-Skip-Training`ヘッダーにより学習使用を完全に防止
- エンタープライズ顧客と同等のプライバシー保護

### 7. **法的保護**
- OpenAIは契約上、ヘッダー設定時の学習使用を禁止している
- GDPR、CCPA等の個人情報保護法に準拠

## ✅ 結論
**チェックを入れて処理を実行しても、PDFの内容がOpenAIの学習に使用されることはありません。**

技術的・契約的・法的な多重の保護により、プライバシーが確保されています。
